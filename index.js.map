{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"47404996-12b53dec464063fd6255bb496\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  \n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","export function renderGallery(images) {\n    return images\n    .map(\n        ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <div class=\"photo-card\">\n        <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n            <p><b>Likes:</b> ${likes}</p>\n            <p><b>Views:</b> ${views}</p>\n            <p><b>Comments:</b> ${comments}</p>\n            <p><b>Downloads:</b> ${downloads}</p>\n        </div>\n        </div>\n        `,\n    )\n    .join('');\n}\n\nexport function clearGallery(container) {\n    container.innerHTML = \"\";\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nlet query = '';\nlet page = 1;\n\nconst perPage = 15;\nconst lightbox = new SimpleLightbox('.gallery a');\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nfunction toggleLoader(isVisible) {\n    loader.style.display = isVisible ? 'block' : 'none';\n}\n\nfunction toggleLoaderOnButton(isLoading) {\n    if (isLoading) {\n    loadMoreBtn.textContent = 'Loading images, please wait...';\n    loadMoreBtn.disabled = true;\n    } else {\n    loadMoreBtn.textContent = 'Load more';\n    loadMoreBtn.disabled = false;\n    }\n}\n\nasync function onSearch(event) {\n    event.preventDefault();\n    query = event.currentTarget.elements.searchQuery.value.trim();\n    \n    if (!query) {\n        iziToast.warning({\n            title: 'Warning',\n            message: 'Search query cannot be empty!',\n            position: \"topRight\",\n            titleColor: \"#ffff\",\n            messageColor: \"#ffff\"\n        });\n    return;\n    }\n\n    page = 1;\n    gallery.innerHTML = '';\n    loadMoreBtn.classList.add('hidden');\n    toggleLoader(true);\n\n    try {\n    const { hits, totalHits } = await fetchImages(query, page, perPage);\n    \n    if (hits.length === 0) {\n        iziToast.error({\n            title: 'Error',\n            message: 'No images match your search query!',\n            position: \"topRight\",\n            titleColor: \"#ffff\",\n            messageColor: \"#ffff\"\n        });\n        return;\n    }\n\n    gallery.innerHTML = renderGallery(hits);\n    lightbox.refresh();\n    \n        iziToast.success({\n            title: 'Success',\n            message: `Found ${totalHits} images.`,\n            position: \"topRight\",\n            titleColor: \"#ffff\",\n            messageColor: \"#ffff\"\n        });\n\n    if (totalHits > perPage) {\n        loadMoreBtn.classList.remove('hidden');\n    }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again later.',\n            position: \"topRight\",\n            titleColor: \"#ffff\",\n            messageColor: \"#ffff\",\n            backgroundColor: \"#ef4040\",\n        });\n    console.error('Error:', error);\n    } finally {\n    toggleLoader(false);\n    }\n}\n\nasync function onLoadMore() {\n    page += 1;\n    toggleLoader(true);\n    toggleLoaderOnButton(true);\n\n    try {\n    const { hits, totalHits } = await fetchImages(query, page, perPage);\n\n    gallery.insertAdjacentHTML('beforeend', renderGallery(hits));\n    lightbox.refresh();\n\n    const totalLoaded = page * perPage;\n\n    if (totalLoaded >= totalHits) {\n        loadMoreBtn.classList.add('hidden');\n        iziToast.info({\n            title: 'Info',\n            message: \"You've reached the end of the search results.\",\n            position: \"topRight\",\n            titleColor: \"#ffff\",\n            messageColor: \"#ffff\"\n        });\n    }\n\n    smoothScroll();\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to load more images. Please try again later.',\n            position: \"topRight\",\n            titleColor: \"#ffff\",\n            messageColor: \"#ffff\"\n        });\n    console.error('Error:', error);\n    } finally {\n        toggleLoader(false);\n        toggleLoaderOnButton(false);\n    }\n}\n\nfunction smoothScroll() {\n    const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n    });\n}\n\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","axios","error","renderGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loadMoreBtn","loader","lightbox","SimpleLightbox","onSearch","onLoadMore","toggleLoader","isVisible","toggleLoaderOnButton","isLoading","event","iziToast","hits","totalHits","smoothScroll","cardHeight"],"mappings":"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"}